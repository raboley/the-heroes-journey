
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>The Magical World</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-24e99be0.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1e815a84.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#the-heroes-journey" class="toc-h1 toc-link" data-title="The Heroes Journey">The Heroes Journey</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#act-2" class="toc-h2 toc-link" data-title="ACT 2">ACT 2</a>
                  </li>
                  <li>
                    <a href="#act-3" class="toc-h2 toc-link" data-title="ACT 3">ACT 3</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#v-special-features-v" class="toc-h1 toc-link" data-title="v Special Features v">v Special Features v</a>
          </li>
          <li>
            <a href="#project-specific-concepts" class="toc-h1 toc-link" data-title="Project Specific Concepts">Project Specific Concepts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#makefile" class="toc-h2 toc-link" data-title="Makefile">Makefile</a>
                  </li>
                  <li>
                    <a href="#githooks" class="toc-h2 toc-link" data-title="githooks">githooks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#embedme-auto-updating-script-block-documentation" class="toc-h1 toc-link" data-title="EmbedMe - Auto-Updating script block documentation">EmbedMe - Auto-Updating script block documentation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#problem-it-solves" class="toc-h2 toc-link" data-title="Problem It Solves">Problem It Solves</a>
                  </li>
                  <li>
                    <a href="#solution" class="toc-h2 toc-link" data-title="Solution">Solution</a>
                  </li>
                  <li>
                    <a href="#example-usage" class="toc-h2 toc-link" data-title="Example Usage">Example Usage</a>
                  </li>
                  <li>
                    <a href="#githook-embedme" class="toc-h2 toc-link" data-title="Githook EmbedMe">Githook EmbedMe</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#slate-dynamic-docs-with-language-tabs" class="toc-h1 toc-link" data-title="Slate - Dynamic Docs With Language Tabs">Slate - Dynamic Docs With Language Tabs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#problem" class="toc-h2 toc-link" data-title="Problem">Problem</a>
                  </li>
                  <li>
                    <a href="#solution-2" class="toc-h2 toc-link" data-title="Solution">Solution</a>
                  </li>
                  <li>
                    <a href="#installation" class="toc-h2 toc-link" data-title="Installation">Installation</a>
                  </li>
                  <li>
                    <a href="#running-slate-locally" class="toc-h2 toc-link" data-title="Running Slate locally">Running Slate locally</a>
                  </li>
                  <li>
                    <a href="#deploying-your-docs-to-github-pages" class="toc-h2 toc-link" data-title="Deploying Your docs to Github Pages">Deploying Your docs to Github Pages</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#lucidchart-diagrams-embedded-into-documentation" class="toc-h1 toc-link" data-title="LucidChart - Diagrams embedded into Documentation">LucidChart - Diagrams embedded into Documentation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#problem-2" class="toc-h2 toc-link" data-title="Problem">Problem</a>
                  </li>
                  <li>
                    <a href="#solution-3" class="toc-h2 toc-link" data-title="Solution">Solution</a>
                  </li>
                  <li>
                    <a href="#example" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#pdd-tiny-incremental-changes-through-puzzles" class="toc-h1 toc-link" data-title="PDD - Tiny Incremental Changes Through Puzzles">PDD - Tiny Incremental Changes Through Puzzles</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#problem-3" class="toc-h2 toc-link" data-title="Problem">Problem</a>
                  </li>
                  <li>
                    <a href="#solution-4" class="toc-h2 toc-link" data-title="Solution">Solution</a>
                  </li>
                  <li>
                    <a href="#example-2" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
                  <li>
                    <a href="#pdd-in-action" class="toc-h2 toc-link" data-title="PDD in action">PDD in action</a>
                  </li>
                  <li>
                    <a href="#install-pdd-locally" class="toc-h2 toc-link" data-title="Install PDD locally">Install PDD locally</a>
                  </li>
                  <li>
                    <a href="#githook-pdd" class="toc-h2 toc-link" data-title="Githook pdd">Githook pdd</a>
                  </li>
                  <li>
                    <a href="#github-action" class="toc-h2 toc-link" data-title="GitHub Action">GitHub Action</a>
                  </li>
                  <li>
                    <a href="#webhook" class="toc-h2 toc-link" data-title="Webhook">Webhook</a>
                  </li>
                  <li>
                    <a href="#more-on-pdd-workflow" class="toc-h2 toc-link" data-title="More on PDD Workflow">More on PDD Workflow</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#generate-infrastructure-diagrams-from-terraform-with-cloudcraft" class="toc-h1 toc-link" data-title="Generate Infrastructure Diagrams from Terraform With CloudCraft">Generate Infrastructure Diagrams from Terraform With CloudCraft</a>
          </li>
          <li>
            <a href="#execute-code-examples-in-documentation-with-dredd" class="toc-h1 toc-link" data-title="Execute Code Examples in Documentation with DREDD">Execute Code Examples in Documentation with DREDD</a>
          </li>
          <li>
            <a href="#initialization" class="toc-h1 toc-link" data-title="Initialization">Initialization</a>
          </li>
          <li>
            <a href="#gocli" class="toc-h1 toc-link" data-title="GoCli">GoCli</a>
          </li>
          <li>
            <a href="#goslate" class="toc-h1 toc-link" data-title="GoSlate">GoSlate</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#installing-locally" class="toc-h2 toc-link" data-title="Installing locally">Installing locally</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='the-heroes-journey'>The Heroes Journey</h1><h2 id='act-2'>ACT 2</h2><h3 id='6-tests-allies-enemies'>6. Tests, Allies, Enemies</h3>
<ul>
<li>Tests -&gt; big G allows you to go and meet people.</li>
<li>Outcomes</li>
<li>Embedme (Meet dee help him embed script contents)</li>
<li>Lucid Chart embed (Lucy shows him how to )</li>
<li>maybe godocs? if I can get it to work</li>
<li>Mr. Hook teaches git hooks</li>
<li>Peggy teaches pdd?</li>
</ul>

<p>Time and Help enter as enemies to README, time causing his documentation to become out of date due to Help adding features and not updating documentation.</p>

<p>Coming across embedme he found that the steps written as scripts could now be embedded into his documents automatically. simply by runing <code>npx embedme ./source/index.html.md</code> he was able to pull the contents from his scripts and embed them in the file automatically allowing for every step to be captured in a way that requires setup steps to work.</p>

<p>He later found make who helped him even further strengthen his resolve. By using <code>make docs</code> he was able to run all the steps required to generate the documentation in a way that was repeatable. Now if only this step could also be run automatically when Help added new features.</p>

<blockquote>
<p>enter git commit hooks</p>
</blockquote>

<p>Now that we have a git hook to automatically update the index.html.md we found it slowed down the commit process, so we only wanted to run it if the scripts directory or index.html.md file were modified.</p>

<p>To do that we need to update the githook with some if logic.</p>

<p>By getting the diff and then grepping those files for the pattern we can run the commit hook only when files we expect to cause changes in the index.html.md to be impacted. Now it should hopefully go really fast when I commit these things.</p>

<blockquote>
<p>enter puzzle driven development</p>
</blockquote>

<p>To install pdd which will allow you to see if your puzzles will be created prior to pushing to origin. If you have malformed puzzles it can break pdd and cause it to do nothing and not tell you what is happening in the webhooks.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make init
</code></pre></div>
<p>This will install the pdd gem, and add it to bash profile so that you can run</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>pdd
</code></pre></div>
<p>to see what kind of puzzles will be created in github.</p>

<p>found more documentation in the <a href="https://github.com/yegor256/pdd">pdd source code</a>.</p>
<h3 id='7-approach-to-the-inmost-cave'>7. Approach to the Inmost Cave</h3>
<ul>
<li>Reid confronts the fact that he can&#39;t do it all, and needs to convince others to pitch in their daily work at the risk of eliminating his part of the team. Doesn&#39;t have self confidence to code.</li>
</ul>
<h3 id='8-the-ordeal'>8. The Ordeal</h3>
<ul>
<li>Reid tries to write code and makes a small cli tool after failing.</li>
</ul>
<h3 id='9-reward-seizing-the-sword'>9. Reward (Seizing the Sword)</h3>
<ul>
<li>Reid is able to make a cli tool and teach someone else how to use it using godocs.</li>
</ul>
<h2 id='act-3'>ACT 3</h2><h3 id='10-the-road-back'>10. The Road Back</h3>
<ul>
<li>Reid goes back to the ordinary world and tries to teach their team how to add documentation and gets rejected.</li>
</ul>
<h3 id='11-resurrection'>11. Resurrection</h3>
<ul>
<li>Reid refuses to document anymore and asks the developers to document their changes explaining the tools he learned.</li>
</ul>
<h3 id='12-return-with-the-elixir'>12. Return with the Elixir</h3>
<ul>
<li>Reid&#39;s team takes his advice and teaches him to be a developer.</li>
</ul>
<h1 id='v-special-features-v'>v Special Features v</h1>
<p>@todo #34:30mins Write a real introduction with getting started commands.</p>

<div style="width: 480px; height: 360px; margin: 30px; position: relative;"><iframe allowfullscreen frameborder="0" style="width:480px; height:360px" src="https://app.lucidchart.com/documents/embeddedchart/3bb76760-6e9b-4405-bd06-0f20594a0c6c" id="mOfa7samMO-B"></iframe></div>

<p>@todo #34:30mins Create section explaining githook as a general concept, and then reference the other githook sections here.</p>
<h1 id='project-specific-concepts'>Project Specific Concepts</h1>
<p>There are some project specific implementations that help development processies that will be covered in this section. It will go over the generic things and how they are implemented in this project and link to the specifics.</p>
<h2 id='makefile'>Makefile</h2>
<blockquote>
<p>to install dependencies of this repo run</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make init
</code></pre></div>
<blockquote>
<p>this requires ruby, and will setup a git pre-commit hook</p>
</blockquote>

<p>Makefiles can be super complicated, but this project uses it to enable some simple commands to get things started quickly. They basically let you run commands starting with make in the terminal and then it will execute all commands defined by that target in the <a href="../makefile">makefile</a></p>

<p><code>make init</code> will run commands to initialize a new repo and install some of the dependencies.</p>

<blockquote>
<p>To get a view of what the docs will look like locally run</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make serve-docs
</code></pre></div>
<blockquote>
<p>then open <a href="http://localhost:4567">http://localhost:4567</a> in your browser
<strong>Note</strong> you will have to refresh the browser to see changes.</p>
</blockquote>

<p><code>make serve-docs</code> will run commands to serve the documentation in your local browser on <a href="http://localhost:4567">http://localhost:4567</a></p>

<blockquote>
<p>After adding script blocks, or updating scripts run</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make embedme
</code></pre></div>
<blockquote>
<p>to update script blocks. (this will happen on commit regardless)</p>
</blockquote>

<p><code>make embedme</code> will run embedme on markdown documentation files to add script contents to script blocks.</p>
<h2 id='githooks'>githooks</h2>
<blockquote>
<p>To enable the githook(s) for this project run</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make init
</code></pre></div>
<blockquote>
<p>The contents of the git hook are a set of scripts</p>
</blockquote>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../.pre-commit.sh</span>

<span class="nb">source</span> ~/.bash_profile
<span class="c"># embedme pre-commit hook so that if some script or documentation </span>
<span class="c"># was updated to include more scripts the documentation pages get updated</span>
<span class="nb">.</span> ./scripts/pre-commit-filter.sh <span class="s2">". scripts/embedme.sh; git add ./source/index.html.md"</span>
<span class="c"># Pdd pre-commit hook so that if there is going to a pdd issue it is caught prior to commit.</span>
<span class="nb">.</span> ./scripts/pdd-commit-hook.sh
</code></pre></div>
<p>Githooks allow for events to trigger commands based on git commands. This project uses githooks to run certain commands prior to doing a commit. This allows documentation to be up to date, puzzles to always be correctly formed, and in the future potentially code linters to run.</p>

<p>These are shared in source control by having scripts in the root of the repsitory and then using a symlink to link that file to the .git/hook folder where githooks need to be stored to be correct. The bad part is that those .git/hooks are not shared in version control, so a symlink is the best way to do it.</p>

<p>The githook is just a set of scripts/steps that will run whenever <code>git commit</code> command is run before it completes.</p>

<p>There are two githooks in this project, more info can be seen in those sections</p>

<ul>
<li><a href="#githook-embedme">embedme</a></li>
<li><a href="#githook-pdd">pdd</a></li>
</ul>
<h1 id='embedme-auto-updating-script-block-documentation'>EmbedMe - Auto-Updating script block documentation</h1>
<p>EmbedMe allows one to keep documentation in script blocks up to date.</p>
<h2 id='problem-it-solves'>Problem It Solves</h2>
<p>I create documentation with code samples from scripts that become out of date as I update scripts but forget to update the overall documentation.</p>
<h2 id='solution'>Solution</h2><div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../scripts/embedme.sh</span>

<span class="c"># Only run embedme on the index.html.md file for slate because</span>
<span class="c"># currently that is the only file that has script references</span>
<span class="c"># embedded into it.</span>
npx embedme ./source/index.html.md
</code></pre></div>
<p>EmbedMe takes a script path from a script block and populates that script block with the content of the script. This will ensure that every time EmbedMe is run it will keep those script blocks up to date.</p>

<p>The next issue that arises is you have to remember to run EmbedMe prior to commiting code changes. That problem is solved with a git pre-commit hook. With a pre-commit hook, prior to commiting a file that impacts either the scripts directory, or the index.html.md file, embedme will run and update any urls then add the files and commit them.</p>
<h2 id='example-usage'>Example Usage</h2>
<blockquote>
<p>inject this reference to a script in the md file (index.html.md for this example)</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># ../.pre-commit.sh</span>
</code></pre></div>
<blockquote>
<p>execute embedme on the file containing this reference (note yours should be sh above, not shell for it to work.)</p>
</blockquote>
<div class="highlight"><pre class="highlight sh tab-shell"><code>npx embedme ./source/index.html.md
</code></pre></div>
<blockquote>
<p>Then the contents of the precommit script will automatically be updated in the script block like below.</p>
</blockquote>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../.pre-commit.sh</span>

<span class="nb">source</span> ~/.bash_profile
<span class="c"># embedme pre-commit hook so that if some script or documentation </span>
<span class="c"># was updated to include more scripts the documentation pages get updated</span>
<span class="nb">.</span> ./scripts/pre-commit-filter.sh <span class="s2">". scripts/embedme.sh; git add ./source/index.html.md"</span>
<span class="c"># Pdd pre-commit hook so that if there is going to a pdd issue it is caught prior to commit.</span>
<span class="nb">.</span> ./scripts/pdd-commit-hook.sh
</code></pre></div>
<p>Script blocks need to have specific extensions for embedme to work. There are a lot of scriptblock extensions documented in the <a href="https://github.com/zakhenry/embedme#multi-language">README.md for embedme</a>. Also the <a href="https://github.com/zakhenry/embedme#embedme">EmbedMe README.md</a> does a great job explaining how it works with a simple gif example at the top.</p>

<blockquote>
<p>Note that the path to the script needs to be absolute, or relative to the path of the script being injected. </p>
</blockquote>

<p>That is why the paths below are ../ because this file is in the source/ directory, and not the root so we need the scripts to be referenced one directory above.</p>

<p>For this example I will purposely use shell, when it needs to be sh for embedme to work on shell scripts (so my example stays in tact). Below is a shell block with a reference to the file .pre-commit.sh and nothing else.</p>

<p>After running embedme on this example <strong>note I would have to change shell to sh for this to work, which can be seen in the next example.</strong></p>

<p>This command is idempotent, so it can be run over and over again. This will allow us to update this script block automatically as the underlying scripts are updated. The next question is how do we make this happen automatically? Enter <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">githooks</a>.</p>
<h2 id='githook-embedme'>Githook EmbedMe</h2>
<p>The embedme command gets right before commiting to ensure that the index.html.md file is always up to date. This is achieved through adding a git <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">pre-commit hook</a>. This is a script that is stored in the .git/hooks directory of your project and is not normally saved in source control. by naming the file <code>pre-commit</code> it tells git to run that script prior to commiting any code. In this repo we store the script in source control, and then create a <a href="https://www.makeuseof.com/tag/what-is-a-symbolic-link-what-are-its-uses-makeuseof-explains/">symlink</a> during the <code>make init</code> command so that every person that uses this repo can have the same pre-commit hook without manual steps of creating it and putting it in the .git/hooks directory of their project.</p>

<p>that causes the <a href=".pre-commit.sh">.pre-commit.sh</a> script to get run every time a user commits their code to this repo.</p>

<p>That script runs some more scripts in it, but we will focus on one.</p>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../.pre-commit.sh</span>

<span class="nb">source</span> ~/.bash_profile
<span class="c"># embedme pre-commit hook so that if some script or documentation </span>
<span class="c"># was updated to include more scripts the documentation pages get updated</span>
<span class="nb">.</span> ./scripts/pre-commit-filter.sh <span class="s2">". scripts/embedme.sh; git add ./source/index.html.md"</span>
<span class="c"># Pdd pre-commit hook so that if there is going to a pdd issue it is caught prior to commit.</span>
<span class="nb">.</span> ./scripts/pdd-commit-hook.sh
</code></pre></div>
<p>The pre-commit-filter.sh script referenced above will run the commands passed to it only if it meets a given criteria. In this case it is if any of the staged files are in the /scripts directory, or are the <a href="./source/index.html.md">./source/index.html.md</a> file.</p>

<p>This is because the pre-commit hook using npx takes time to run, and we only want to run it if a file that could potentially be used in that as a reference is updated.</p>

<p>Then the commands passed in are to run the embedme.sh script, and then add the new updated <a href="./source/index.html.md">./source/index.html.md</a> that has been modified by the embedme command.</p>

<p>The embedme.sh script is very simple</p>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../scripts/embedme.sh</span>

<span class="c"># Only run embedme on the index.html.md file for slate because</span>
<span class="c"># currently that is the only file that has script references</span>
<span class="c"># embedded into it.</span>
npx embedme ./source/index.html.md
</code></pre></div>
<p>which just runs the command to embed source code in the <a href="./source/index.html.md">./source/index.html.md</a> file.</p>

<p>The git add is very important to do after that, otherwise it will update the file, but not commit it leaving the next change to be commited manually by the user.</p>

<p>The result of all that leaves us with an <a href="./source/index.html.md">./source/index.html.md</a> file that is always up to date with any code files that are embedded within it.</p>
<h1 id='slate-dynamic-docs-with-language-tabs'>Slate - Dynamic Docs With Language Tabs</h1><h2 id='problem'>Problem</h2>
<p>Code is complicated, and sometimes you have differnet languages, operating systems or frameworks to deal with and normal markdown just isn&#39;t enough. There needs to be an easier to navigate documentation system that allows for langauge tabs and more dynamic documentation styles.</p>
<h2 id='solution-2'>Solution</h2>
<p><a href="https://github.com/slatedocs/slate">Slate</a> is web based documentation system that has a description pane and a code pane so that it is easy to follow code examples on the right hand side of the window, and more prose like descriptions in the middle with an easy to navigate table of contents on the left. It even has search functionality. The best thing about slate is you can embed code examples and allow users to select from different tabs based on what is needed for them. It also lets you embed html into the document, so more advanced constructs can be added such as embedding a live lucidchart into the documentation. All this allows for documentation to be live realtime, more easy to understand and navigate while all being written in an <a href="https://github.com/slatedocs/slate/wiki/Markdown-Syntax">extended markdown</a> syntax.</p>
<h2 id='installation'>Installation</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>make init
</code></pre></div>
<p>To add slate to your project the easist thing is to clone their repo, and start modifying it to fit your project as described in their <a href="https://github.com/slatedocs/slate/wiki/Using-Slate-Natively">getting started guide</a>. Once you have a slate project setup or you have just downloaded a repo with slate that you want to work on locally, you can install dependencies depending on your OS, such as these <a href="https://github.com/slatedocs/slate/wiki/Using-Slate-Natively#installing-dependencies-on-macos">macOS dependency install instructions</a></p>

<p>after you have the dependencies installed you can run <code>make init</code> to install all the ruby gems needed for slate to run successfully. Under the hood it is just a <code>bundle install</code> command.</p>
<h2 id='running-slate-locally'>Running Slate locally</h2>
<blockquote>
<p>Run slate locally</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make serve-docs
</code></pre></div>
<blockquote>
<p>Open <a href="http://192.168.0.49:4567">http://192.168.0.49:4567</a> in browsers</p>
</blockquote>

<p>To run slate locally simply run <code>make serve-docs</code> to serve the documents on your localhost. then you can go to <a href="http://192.168.0.49:4567">http://192.168.0.49:4567</a> to view your documents locally. The nice thing is as long as the process is running you can make updates to this document and then refresh the browser to see the effects.</p>

<p>@todo #22:30mins For slate figure out a good way to do local development with an auto refresh like situation.</p>

<p>This browser link happens using the <a href="https://middlemanapp.com/basics/install/">middleman</a> web server application. It will host the website using ruby runtime.</p>
<h2 id='deploying-your-docs-to-github-pages'>Deploying Your docs to Github Pages</h2>
<blockquote>
<p>deploy to github pages use</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nb">.</span> ../deploy.sh
</code></pre></div>
<blockquote>
<p>or just commit to master branch</p>
</blockquote>

<p>Once you have your slate docs working locally you can <a href="https://github.com/slatedocs/slate/wiki/Deploying-Slate">publish them to GitHub Pages</a>.</p>

<p>This repo is setup with a GitHub action that will do this automatically on <code>master</code> branch.</p>

<blockquote>
<p>if you use the slate repo as a template it will also have the github action setup to do so on <code>main</code> branch.</p>
</blockquote>

<p>The GitHub action is configured in the [.github/workflows/deploy.yml] file. It will run the steps to publish this documentation to GitHub pages.</p>

<p>The docs can be read from this github page</p>

<p><a href="https://raboley.github.io/the-heroes-journey">https://raboley.github.io/the-heroes-journey</a></p>

<p>your own github pages site will be published with this pattern if you use the same template <code>https://&lt;your-github-username&gt;.github.io/&lt;github-repository-name&gt;</code></p>

<blockquote>
<p>Note: The first time you publish your github pages you have to manually do it from your laptop as an admin account.</p>
</blockquote>

<p>To publish your documentation to github pages run the deploy script</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nb">.</span> deploy.sh
</code></pre></div>
<p>This will create a branch called gh-pages and publish the documentation static content to it. Then have github pages host that content.</p>

<blockquote>
<p>Note: Terminal exited 1 when I ran it first time, but it still worked anyways.</p>
</blockquote>

<p>After it has been done the first time the github action should be able to successfully publish your docs to your url.</p>
<h1 id='lucidchart-diagrams-embedded-into-documentation'>LucidChart - Diagrams embedded into Documentation</h1><h2 id='problem-2'>Problem</h2>
<p>High leven design charts quickly become out of date if they are hard coded into documentation as an image. They are also much less valuable if they only exist as a url.</p>
<h2 id='solution-3'>Solution</h2>
<p>Lucid chart allows you to embed charts as html objects, and slate allows you to publish raw html leading to documentation always being up to date with source design charts.</p>
<h2 id='example'>Example</h2>
<p>Simply by going to lucid chart and creating a new document, then select embed and copy the embed url.</p>

<blockquote>
<p>To make a gif like this you can screen cap your screen on mac using</p>

<p><code>cmd + shift + 5</code></p>

<p>Which will generate a mov file. You can then convert that mov file to a gif using any online converting service. Finally link the gif with a relative path adding a ! before the url style link like above.</p>
</blockquote>

<p><img src="https://github.com/raboley/the-heroes-journey/blob/master/docs/videos/lucid_chart_embed_link_demo.gif?raw=true" alt="lucid_chart_embed_link_demo.gif" /></p>

<blockquote>
<p>The embed link in the video will look something like below:</p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"width: 480px; height: 360px; margin: 10px; position: relative;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;iframe</span>
    <span class="na">allowfullscreen</span>
    <span class="na">frameborder=</span><span class="s">"0"</span>
    <span class="na">style=</span><span class="s">"width:480px; height:360px"</span>
    <span class="na">src=</span><span class="s">"https://app.lucidchart.com/documents/embeddedchart/e9f142be-ca5e-4177-8f14-36c544f655ca"</span>
    <span class="na">id=</span><span class="s">"phyaKTPhMxyz"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<blockquote>
<p>it can just be pasted anywhere outside of a code block to have it render the html and show the image.</p>
</blockquote>

<div style="width: 480px; height: 360px; margin: 10px; position: relative;"><iframe allowfullscreen frameborder="0" style="width:480px; height:360px" src="https://app.lucidchart.com/documents/embeddedchart/e9f142be-ca5e-4177-8f14-36c544f655ca" id="phyaKTPhMxyz"></iframe></div>

<p>Now whenever that <a href="https://app.lucidchart.com/documents/edit/e9f142be-ca5e-4177-8f14-36c544f655ca/-gyaVl7tAo0L#?folder_id=home&amp;browser=icon">source lucid chart</a> is updated you will see it update here shortly after. No more repeat copy paste or stale diagrams</p>

<p>@todo #48:15mins Clean up PDD section of documentation</p>
<h1 id='pdd-tiny-incremental-changes-through-puzzles'>PDD - Tiny Incremental Changes Through Puzzles</h1><h2 id='problem-3'>Problem</h2>
<p>Features and improvemnts are really hard to fit into small chunks. Puzzle Driven Development (<a href="https://github.com/yegor256/pdd">pdd</a>) enables really small incremental improvements that should last for a very short amount of time. This makes changes happen fast, and if branches are used it will be super short lived branches.</p>
<h2 id='solution-4'>Solution</h2>
<p>With PDD you just spend the amount of time that the puzzle says to do, and do as much as possible then creating additional puzzles to fill in the gaps. Allowing things to be complete, even though it isn&#39;t 100% completed, but it is in a better state and closer to that 100% done. This allows people to get something done without spinning their wheels for days to get something added.</p>
<h2 id='example-2'>Example</h2>
<p>I can&#39;t do actual puzzle syntax in this, so I will use to-do and to make it a real puzzle you just have to remove the <code>-</code> from the to-do to make it real.</p>

<blockquote>
<p>an example would be something like this</p>

<p>@to-do #[parent-issue]:[amount of time it should take]/[role that should complete this task] [description of the task]</p>

<p>So for example the issue that created this documentation looked like this:</p>

<p>@to-do #18:15mins Create the problem, solution and example for PDD.</p>

<p>you can omit the role if you want, since I am doing all the work it is pointless for me.</p>
</blockquote>

<p>The important thing is to have an issue to link it to. So if you want to do something manually create an issue in github and then you can start chaining puzzles based on that issue. The idea being that once all child issues are closed automatically as puzzles you can close the manual github issue manually. If you spend 30 mins and find it isn&#39;t done yet, you can create another puzzle to finish the rest of it.</p>

<blockquote>
<p>@to-do #30:15mins Create movie to show how pdd examples work</p>
</blockquote>

<p>For this example it probably doesn&#39;t need a another issue, but if it did I could create a child issue from that to expand upon.
So in this instance hte issue that was created by the original puzzle was #30 so my next puzzle could be something like:</p>

<p>Then I would remove the original puzzle from source control because that was completed (the lines that describe #30 which would be <code>@to-do #18:15mins Create the problem, solution and example for PDD.</code>) and then move on and the next person can fix it as the next puzzle, but the original puzzle #30 would be closed by pdd.</p>
<h2 id='pdd-in-action'>PDD in action</h2>
<blockquote>
<p>Note: don&#39;t leave any to do&#39;s in your code that aren&#39;t puzzles. it will screw pdd up.</p>
</blockquote>

<p>pdd does some string searching for the words to-do (remove the <code>-</code>) and if there is any instance of that word without proper tag formatting it will try to create a ticket based on it and break. Originally it wouldn&#39;t work because I had those words in code I didn&#39;t write so it was trying to create puzzles based on it and throwing an error and then just not doing anything. To fix that I did a find and replace for all instances of that word and ran pdd locally to confirm there were no errors.</p>
<h2 id='install-pdd-locally'>Install PDD locally</h2>
<blockquote>
<p>install pdd</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>make init
</code></pre></div>
<blockquote>
<p>Note: you need to add the ruby gems bin to your path to make it work. The script will install it to your .bash_profile so if you are using zsh you will need to add it to your path manually.</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Run pdd against everything</span>
pdd

<span class="c"># Run it but exclude some files</span>
pdd <span class="nt">--exclude</span><span class="o">=</span>src/<span class="k">**</span>/<span class="k">*</span>.java <span class="nt">--exclude</span><span class="o">=</span>target/<span class="k">**</span>/<span class="k">*</span>
</code></pre></div>
<p>There are two versions of <a href="https://github.com/yegor256/pdd">pdd</a>, <a href="https://github.com/yegor256/0pdd">0pdd</a> and <a href="https://github.com/yegor256/pdd">pdd</a>. <a href="https://github.com/yegor256/0pdd">0pdd</a> is the hosted version of pdd that we send git commit into to so that it can automatically create puzzles. Meanwhile pdd is the command line tool that you can run locally to verify which puzzles would be created by [0pdd](https://github.com/yegor256/0pdd. Installing <a href="https://github.com/yegor256/pdd">pdd</a> locally is pretty simple, it just consists of installing the gem and adding it to your path. This will happen automtaically using <code>make init</code>, but can be manually installed using install-pdd.sh script.</p>

<p>Once it is installed and in your path you can run it from terminal. It will throw an error if you have incorrectly formatted puzzles, and show output of what would be created if you have all correctly formatted puzzles.</p>
<h2 id='githook-pdd'>Githook pdd</h2>
<blockquote>
<p>The commit hook command is pretty simple for now, but in the future if there were rules that needed to be added, or files excluded they would be added here.</p>
</blockquote>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../scripts/pdd-commit-hook.sh</span>

pdd
</code></pre></div>
<p>Much like the embedme githook, in this repo there is a pdd githook. It will run pdd prior to committing to ensure that no one is committing malformed puzzles. If there is a malformed puzzle the commit will not go through until the puzzles are corrected.</p>

<p>This githook is included in the .pre-commit.sh file that symlinked with the .git/hooks/pre-commit file so that this config can be stored in the repo. Once running <code>make init</code> it will set this symlink up for you.</p>

<p>@todo #18:30mins explain how to setup the pdd git action in GitHub</p>
<h2 id='github-action'>GitHub Action</h2>
<p>It isn&#39;t required, but I setup a GitHub action to run pdd on each commit so that we can tell when malformed puzzle commands come through and cause an issue that is clear in the repository. The action just runs the pdd command to ensure it exits successfully.</p>

<p>The action is located in <a href="../.github/workflows/pdd.yml">.github/workflows/pdd.yml</a></p>

<p>It basically just gets ruby setup to the correct version then runs the pdd commit hook.</p>

<p>If it finds a malformed puzzle it will error, otherwise it will succeed the build. It doesn&#39;t create the issues in github, that is done via the webhook on commit.</p>
<h2 id='webhook'>Webhook</h2>
<p>pdd is automated using a webhook which on every commit pushed to GitHub notifies 0pdd who then creates/closes issues based on puzzles left in the repository. It is a pretty simple implementation and works almost instantly. Just have follow the documentation posted on their <a href="https://www.yegor256.com/2017/04/05/pdd-in-action.html">pdd in action page</a>.</p>

<blockquote>
<p>Note: I had a lot of trouble getting it to work originally when following the instructions, but that is because there were all sorts of malformed puzzles in my code (that I didn&#39;t write). It should just work seemlessly as long as you don&#39;t have malformed puzzles. An issue is that in the webhook history it will return 200s whether the puzzles are all good, or malformed, so you won&#39;t have any idea that something is wrong until you run pdd locally.</p>
</blockquote>
<h2 id='more-on-pdd-workflow'>More on PDD Workflow</h2>
<p>The best way to see and understand pdd is to <a href="https://www.yegor256.com/2017/04/05/pdd-in-action.html">watch the webinar</a> that explains it, and talks about 0pdd, the service that creates and closes issues in github based on puzzles left in documents.</p>
<h1 id='generate-infrastructure-diagrams-from-terraform-with-cloudcraft'>Generate Infrastructure Diagrams from Terraform With CloudCraft</h1>
<p>CloudCraft allows you to design architecture as diagrams then generate TF files based on those designs. In addition it will also let you connect to your AWS subscription and generate diagrams based on live infrastructure which is interesting.</p>

<p>I don&#39;t really feel like doing much more about this at this time since it only works for AWS. Also it outputs terragrunt files that provide one way to make the way I don&#39;t like doing terraform code less terrible. That way is when you have a folder for every environment in your tf repo, and then manually update each tf file in each folder as things progress between environments. I would much rather have one instance in it, and then have a pipeline dictate the different values that should be done per each environment.</p>

<p>Seems like update to code via these diagrams would be a manual process, and be hard to maintain. It is a cool idea, but don&#39;t think it is worth exploring right now.</p>
<h1 id='execute-code-examples-in-documentation-with-dredd'>Execute Code Examples in Documentation with DREDD</h1>
<p>@todo #14:60mins Describe DREDD, install process, how to write a test in documentation, execute the tests and create a github action to run these tests.</p>
<h1 id='initialization'>Initialization</h1><div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># ../scripts/embedme.sh</span>

<span class="c"># Only run embedme on the index.html.md file for slate because</span>
<span class="c"># currently that is the only file that has script references</span>
<span class="c"># embedded into it.</span>
npx embedme ./source/index.html.md
</code></pre></div><h1 id='gocli'>GoCli</h1>
<p>@todo #41:60mins Create a go cli tool that generates golang documentation via godocs. To make goslate be more useful I think it is important to figure out how to create a cli tool with go that generates documentation so that I can see if it really is a game changer, or if it will just be a different way to do the same thing I already do.</p>
<h1 id='goslate'>GoSlate</h1>
<p>@todo #41:30mins Create goslate example code</p>
<h2 id='installing-locally'>Installing locally</h2>
<p><a href="https://ahmadawais.com/install-go-lang-on-macos-with-homebrew/">install golang</a> ensuring you add it to your path.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>go get <span class="nt">-u</span> github.com/growler/go-slate
</code></pre></div>
<p>install goslate using <code>go get</code></p>

<p>go-slate assumes the following source tree:</p>

<p>src
    └── service
        ├── main.go
        └── apidoc</p>

<p>@todo #41:30mins document how to run goslate locally</p>

<p>@todo #41:30mins publish goslate docs to github pages</p>

<p>@todo #41:30mins Create github action to publish goslate docs to github pages</p>

<p>@todo #41:15mins update the pre-commit hook to use goslate commands instead of ruby slate.</p>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
